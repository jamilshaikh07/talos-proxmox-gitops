---
# Talos Cluster Configuration Variables
# VM workers are AUTO-GENERATED from Terraform outputs
# Bare metal workers (baremetal_workers) are manually maintained - DO NOT DELETE
# Generated by: scripts/generate-ansible-inventory.py

# Cluster configuration
cluster_name: "homelab-cluster"
cluster_endpoint: "https://10.20.0.40:6443"  # Control plane IP

# Default install disk (used if not specified per node)
default_install_disk: "/dev/sda"

# Default Longhorn disk (used for storage on all nodes)
default_longhorn_disk: "/dev/sdb"

# Talos node configuration
# - install_disk: optional, defaults to default_install_disk
# - longhorn_disk: optional, dedicated disk for Longhorn storage (defaults to default_longhorn_disk)
talos_nodes:
  control_plane:
    hostname: "talos-cp-01"
    ip: "10.20.0.40"
    vmid: 101
    longhorn_disk: "/dev/sdb"  # 500GB for Longhorn
  # VM workers (from Terraform)
  workers:
    - hostname: "talos-wk-01"
      ip: "10.20.0.41"
      vmid: 100
      longhorn_disk: "/dev/sdb"  # 500GB for Longhorn
    - hostname: "talos-wk-02"
      ip: "10.20.0.42"
      vmid: 103
      longhorn_disk: "/dev/sdb"  # 500GB for Longhorn
    - hostname: "talos-wk-03"
      ip: "10.20.0.43"
      vmid: 102
      longhorn_disk: "/dev/sdb"  # 500GB for Longhorn

# Bare metal workers (manually maintained - not managed by Terraform)
# Add your bare metal nodes here with custom disk configurations
baremetal_workers:
  - hostname: "talos-wk-04"
    ip: "10.20.0.45"
    install_disk: "/dev/nvme0n1"   # NVMe 250GB for Talos OS
    longhorn_disk: "/dev/sda"       # SATA SSD 512GB for Longhorn storage

# Proxmox configuration (for cleanup)
proxmox_node: "alif"  # Proxmox node name

# Talos configuration directory (relative to repo root)
talos_config_dir: "{{ playbook_dir }}/../../talos-{{ cluster_name }}"

# CNI to use (none = we'll install Cilium manually)
cni_name: "none"

# Allow scheduling on control plane
allow_scheduling_on_control_planes: true

# Talos version
talos_version: "1.11.5"

# Kubernetes version (must be compatible with Talos version)
kubernetes_version: "1.34.1"

# Cilium version
cilium_version: "1.16.5"

# Wait timeouts (in seconds)
wait_timeout_nodes: 600
wait_timeout_cilium: 300
